console.log("\n %c HeoMusic 开源静态音乐播放器 v1.5 %c https://github.com/zhheo/HeoMusic \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");var volume=.8;const params=new URLSearchParams(window.location.search);var heo={changeMusicBg:function(e=!0){const t=document.getElementById("music_bg");if(e){const e=document.querySelector("#heoMusic-page .aplayer-pic");var o=new Image;o.src=extractValue(e.style.backgroundImage),o.onload=function(){t.style.backgroundImage=e.style.backgroundImage}}else{let e=setInterval(()=>{document.querySelector("#heoMusic-page .aplayer-pic")&&(clearInterval(e),document.querySelector("meting-js").aplayer.volume(.8,!0),heo.addEventListenerChangeMusicBg())},100)}},addEventListenerChangeMusicBg:function(){document.getElementById("heoMusic-page").querySelector("meting-js").aplayer.on("loadeddata",function(){heo.changeMusicBg()})},getCustomPlayList:function(){const e=document.getElementById("heoMusic-page"),t=params.get("type")||"playlist";if(params.get("id")&&params.get("server")){console.log("获取到自定义内容");var o=params.get("id"),n=params.get("server");e.innerHTML=`<meting-js id="${o}" server="${n}" type="${t}" mutex="true" preload="auto" order="random"></meting-js>`}else console.log("无自定义内容"),e.innerHTML=`<meting-js id="${userId}" server="${userServer}" type="${userType}" mutex="true" preload="auto" order="random"></meting-js>`;heo.changeMusicBg(!1)}};heo.getCustomPlayList();const vh=1*window.innerHeight;function extractValue(e){return/\("([^\s]+)"\)/g.exec(e)[1]}document.documentElement.style.setProperty("--vh",`${vh}px`),window.addEventListener("resize",()=>{let e=1*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}),document.addEventListener("keydown",function(e){"Space"===e.code&&(e.preventDefault(),document.querySelector("meting-js").aplayer.toggle()),39===e.keyCode&&(e.preventDefault(),document.querySelector("meting-js").aplayer.skipForward()),37===e.keyCode&&(e.preventDefault(),document.querySelector("meting-js").aplayer.skipBack()),38===e.keyCode&&volume<=1&&(volume+=.1,document.querySelector("meting-js").aplayer.volume(volume,!0)),40===e.keyCode&&volume>=0&&(volume+=-.1,document.querySelector("meting-js").aplayer.volume(volume,!0))});