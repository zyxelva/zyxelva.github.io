document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelector("#bber-talk")||"";e&&(fetch("https://me.edui.fun/api/memo?creatorId=101&rowStatus=NORMAL&limit=10").then(e=>e.json()).then(t=>{for(var a="",o="",l=t.data,r=0;r<l.length;r++)a+=`<li class="item"><span class="datetime">${new Date(1e3*l[r].createdTs).toLocaleString()}</span>： <a href="/bb/">${l[r].content.replace(/!\[.*?\]\((.*?)\)/g,' <a href="$1" target="_blank">🌅</a> ').replace(/\[(.*?)\]\((.*?)\)/g,' <a href="$2" target="_blank">$1 🔗</a> ')}</a></li>`;o='<span class="index-talk-icon"><svg viewBox="0 0 1024 1024" width="21" height="21"><path d="M184.32 891.667692c-12.603077 0-25.206154-2.363077-37.809231-7.876923-37.021538-14.966154-59.864615-49.624615-59.864615-89.009231v-275.692307c0-212.676923 173.292308-385.969231 385.969231-385.969231h78.76923c212.676923 0 385.969231 173.292308 385.969231 385.969231 0 169.353846-137.846154 307.2-307.2 307.2H289.083077l-37.021539 37.021538c-18.904615 18.116923-43.323077 28.356923-67.741538 28.356923zM472.615385 195.347692c-178.018462 0-322.953846 144.935385-322.953847 322.953846v275.692308c0 21.267692 15.753846 29.144615 20.48 31.507692 4.726154 2.363077 22.055385 7.876923 37.021539-7.08923l46.473846-46.473846c6.301538-6.301538 14.178462-9.452308 22.055385-9.452308h354.461538c134.695385 0 244.184615-109.489231 244.184616-244.184616 0-178.018462-144.935385-322.953846-322.953847-322.953846H472.615385z"></path><path d="M321.378462 512m-59.076924 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z"></path><path d="M518.301538 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z"></path><path d="M715.224615 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153846 0 59.076923 59.076923 0 1 0-118.153846 0Z"></path></svg></span><div class="talk-wrap"><ul class="talk-list">'+a+"</ul></div>",e&&(e.innerHTML=o),window.Lately&&Lately.init({target:".datetime"})}),setInterval(function(){for(var e=document.querySelector(".talk-list"),t=e.querySelectorAll(".item"),a=0;a<t.length;a++)setTimeout(function(){e.appendChild(t[0])},1e3)},2e3));var t={host:"https://demo.usememos.com/",limit:"10",creatorId:"101",domId:"#memos",username:"Admin",name:"Administrator",path:""};if("undefined"!=typeof memos)for(var a in memos)memos[a]&&(t[a]=memos[a]);var o=document.querySelector("#album")||"";function l(e,a){let l=leonus.procMemosGalleries(t.host,e,a,"memos-photo");o.innerHTML='<div class="memos-photo-wrapper">'+l+"</div>",window.Lately&&Lately.init({target:".photo-time"})}o&&function(e){var a=t.host+t.path+"?creatorId="+t.creatorId+"&tag=相册";let r=e||8;var s=JSON.parse(localStorage.getItem("albumUpdated"))||"",m=JSON.parse(localStorage.getItem("albumData"))||"";m?(l(m,r),console.log("memoAlbum 本地数据加载成功")):localStorage.setItem("albumUpdated","");fetch(a).then(e=>e.json()).then(e=>{var t=e[0].updatedTs;if(t&&s!==t){var a=e;o.innerHTML="",l(a,r),localStorage.setItem("albumUpdated",JSON.stringify(t)),localStorage.setItem("albumData",JSON.stringify(a)),console.log("memoAlbum 热更新完成")}else console.log("memoAlbum API 数据未更新")})}(6);let r=document.getElementById("todolist")||"";function s(e,t){memos.host,memos.path,memos.creatorId;const a=/```([\W\w]+)```/g;let o=0;e.forEach(e=>{if(e&&o<t){let t=e.content,l=t.match(/\[(.*?)\]/g)[0].replace(/\[(.*?)\]/,"$1");t=t.replace(/#.*\s/g,"").replace(/(-\s\[\s\]\s)(.*)/g,'<li><i style="margin-right: 5px;" class="fa-regular fa-circle"></i>$2</li>').replace(/(-\s\[x\]\s)(.*)/g,'<li class="achieve"><i style="margin-right: 5px;" class="fa-regular fa-circle-check"></i>$2</li>').replace(a,"");let s=document.createElement("div");s.className="list_item",s.innerHTML=`<h3>${l}</h3><ul>${t}</ul>`,r.appendChild(s),o++}}),waterfall("#todolist")}r&&function(e){var a=t.host+t.path+"?creatorId="+t.creatorId+"&tag=清单";let o=e||30;var l=JSON.parse(localStorage.getItem("todoUpdatedTime"))||"",m=JSON.parse(localStorage.getItem("todoData"))||"";m?(s(m,o),console.log("memoAlbum 本地数据加载成功")):localStorage.setItem("todoUpdatedTime","");fetch(a).then(e=>e.json()).then(e=>{var t=e[0].updatedTs;if(t&&l!==t){var a=e;r.innerHTML="",s(a,o),localStorage.setItem("todoUpdatedTime",JSON.stringify(t)),localStorage.setItem("todoData",JSON.stringify(a)),console.log("memoAlbum 热更新完成")}else console.log("memoAlbum API 数据未更新")})}(30)});