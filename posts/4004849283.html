<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="【MySQL学习】7.InnoDB 引擎底层解析, Back-End Dev Java"><meta name="description" content="1 常见引擎



种类
特点




InnoDB
现Mysql的默认事务型存储引擎，并且提供了行级锁和外键的约束。性能不错且支持自动崩溃恢复


MyISAM
Mysql 5.1 版本前的默认存储引擎。特性丰富但不支持事务，也不支持行级"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="referrer" content="no-referrer-when-downgrade"><title>【MySQL学习】7.InnoDB 引擎底层解析 | Kezade</title><link rel="icon" type="image/jpeg" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/avatar/avatar2.jpg"><style>body{background-image:url(https://it-ark-dev.oss-cn-shenzhen.aliyuncs.com/464e9ac7a5a729ae67f91f7cf0cf6fe2.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;background-position:center center}</style><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/awesome/css/all.min.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/materialize/materialize.min.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/aos/aos.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/animate/animate.min.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/picgo@v3.1/css/matery.css?v3"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/css/my.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/css/dark.css" media="none" onload='"all"!=media&&(media="all")'><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/tocbot/tocbot.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/css/post.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/css/reward.css"><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/jquery/jquery-3.6.0.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/picgo@v3.3/js/function.js?v88"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/picgo@v1.3/js/imgStatus.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/picgo@v1.3/js/waterfall.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/picgo@v1.3/js/lately.min.js"></script><script>var memos={host:"https://s.dusays.com/",limit:"10",creatorId:"49",username:"zyxelva",name:"Kezade",domId:"#memos",path:"api/v1/memo"},douban={api:"https://douban-api.edui.fun/"}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss2.xml" title="Kezade" type="application/rss+xml"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/avatar/avatar2.jpg" class="logo-img k-avatar" alt="LOGO"> <span class="logo-span">Kezade</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:0.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fa-solid fa-newspaper" style="zoom:0.6"></i> <span>文章</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:0.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px;zoom:0.6"></i> <span>标签</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px;zoom:0.6"></i> <span>分类</span></a></li><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px;zoom:0.6"></i> <span>归档</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fa-solid fa-sitemap" style="zoom:0.6"></i> <span>系列</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:0.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/categories/%E7%AE%97%E6%B3%95"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>算法学习</span></a></li><li><a href="/categories/RocketMQ%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>RMQ学习</span></a></li><li><a href="/categories/Netty%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>Netty学习</span></a></li><li><a href="/categories/Spring%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>Spring学习</span></a></li><li><a href="/categories/JVM%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>JVM学习</span></a></li><li><a href="/categories/MySQL%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>MySQL学习</span></a></li><li><a href="/categories/MyBatis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>MyBatis学习</span></a></li><li><a href="/categories/Zookeeper%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>ZK学习</span></a></li><li><a href="/categories/Hexo"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>Hexo学习</span></a></li><li><a href="/categories/Redis%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>Redis学习</span></a></li><li><a href="/categories/Docker%E5%AD%A6%E4%B9%A0"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>Docker学习</span></a></li><li><a href="/categories/AP-Calculus"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>AP学习</span></a></li><li><a href="/categories/A-Level"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>A-Level学习</span></a></li><li><a href="/categories/SAT"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>SAT学习</span></a></li><li><a href="/categories/%E8%80%83%E7%A0%94"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>考研</span></a></li><li><a href="/categories/OSSD"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>OSSD</span></a></li><li><a href="/categories/%E9%AB%98%E8%80%83"><i class="fa-solid fa-rocket" style="margin-top:-20px;zoom:0.6"></i> <span>高考</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fa-solid fa-place-of-worship" style="zoom:0.6"></i> <span>我的</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:0.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/galleries"><i class="fas fa-image" style="margin-top:-20px;zoom:0.6"></i> <span>相册</span></a></li><li><a href="/bibi"><i class="fa-fw fa-solid fa-cloud-rain" style="margin-top:-20px;zoom:0.6"></i> <span>哔哔</span></a></li><li><a href="/todolist"><i class="fa-fw fa-solid fa-circle-check" style="margin-top:-20px;zoom:0.6"></i> <span>清单</span></a></li><li><a href="/musics"><i class="fas fa-music" style="margin-top:-20px;zoom:0.6"></i> <span>音乐</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fa-solid fa-circle-info" style="zoom:0.6"></i> <span>更多</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:0.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/contact"><i class="fas fa-comments" style="margin-top:-20px;zoom:0.6"></i> <span>留言</span></a></li><li><a href="/friends"><i class="fa-solid fa-link" style="margin-top:-20px;zoom:0.6"></i> <span>友链</span></a></li><li><a href="/friend-circle"><i class="fa-solid fa-rss" style="margin-top:-20px;zoom:0.6"></i> <span>圈圈</span></a></li><li><a href="/about"><i class="fas fa-user-circle" style="margin-top:-20px;zoom:0.6"></i> <span>关于</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:0.85"></i></a></li><li><a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式"><i id="sum-moon-icon" class="fas fa-sun" style="zoom:0.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/avatar/avatar2.jpg" class="logo-img circle responsive-img"><div class="logo-name">Kezade</div><div class="logo-desc">7 年 Java 开发经验，其中 3 年以上大型系统架构设计经验，以及 2 年以上的团队管理经验 | 具有分布式、高并发、高可用、大数据量的系统架构设计以及研发经验 | 对 Zookeeper、Netty、Dubbo、Spring Cloud、 Spring 等开源框架源码有过深入研究，并且有一定的框架定制开发经验</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fa-solid fa-newspaper"></i> 文章<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/tags" style="margin-left:75px"><i class="fa fas fa-tags" style="position:absolute;left:50px"></i> <span>标签</span></a></li><li><a href="/categories" style="margin-left:75px"><i class="fa fas fa-bookmark" style="position:absolute;left:50px"></i> <span>分类</span></a></li><li><a href="/archives" style="margin-left:75px"><i class="fa fas fa-archive" style="position:absolute;left:50px"></i> <span>归档</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fa-solid fa-sitemap"></i> 系列<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/categories/%E7%AE%97%E6%B3%95" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>算法学习</span></a></li><li><a href="/categories/RocketMQ%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>RMQ学习</span></a></li><li><a href="/categories/Netty%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>Netty学习</span></a></li><li><a href="/categories/Spring%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>Spring学习</span></a></li><li><a href="/categories/JVM%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>JVM学习</span></a></li><li><a href="/categories/MySQL%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>MySQL学习</span></a></li><li><a href="/categories/MyBatis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>MyBatis学习</span></a></li><li><a href="/categories/Zookeeper%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>ZK学习</span></a></li><li><a href="/categories/Hexo" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>Hexo学习</span></a></li><li><a href="/categories/Redis%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>Redis学习</span></a></li><li><a href="/categories/Docker%E5%AD%A6%E4%B9%A0" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>Docker学习</span></a></li><li><a href="/categories/AP-Calculus" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>AP学习</span></a></li><li><a href="/categories/A-Level" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>A-Level学习</span></a></li><li><a href="/categories/SAT" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>SAT学习</span></a></li><li><a href="/categories/%E8%80%83%E7%A0%94" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>考研</span></a></li><li><a href="/categories/OSSD" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>OSSD</span></a></li><li><a href="/categories/%E9%AB%98%E8%80%83" style="margin-left:75px"><i class="fa fa-solid fa-rocket" style="position:absolute;left:50px"></i> <span>高考</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fa-solid fa-place-of-worship"></i> 我的<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/galleries" style="margin-left:75px"><i class="fa fas fa-image" style="position:absolute;left:50px"></i> <span>相册</span></a></li><li><a href="/bibi" style="margin-left:75px"><i class="fa fa-fw fa-solid fa-cloud-rain" style="position:absolute;left:50px"></i> <span>哔哔</span></a></li><li><a href="/todolist" style="margin-left:75px"><i class="fa fa-fw fa-solid fa-circle-check" style="position:absolute;left:50px"></i> <span>清单</span></a></li><li><a href="/musics" style="margin-left:75px"><i class="fa fas fa-music" style="position:absolute;left:50px"></i> <span>音乐</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fa-solid fa-circle-info"></i> 更多<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/contact" style="margin-left:75px"><i class="fa fas fa-comments" style="position:absolute;left:50px"></i> <span>留言</span></a></li><li><a href="/friends" style="margin-left:75px"><i class="fa fa-solid fa-link" style="position:absolute;left:50px"></i> <span>友链</span></a></li><li><a href="/friend-circle" style="margin-left:75px"><i class="fa fa-solid fa-rss" style="position:absolute;left:50px"></i> <span>圈圈</span></a></li><li><a href="/about" style="margin-left:75px"><i class="fa fas fa-user-circle" style="position:absolute;left:50px"></i> <span>关于</span></a></li></ul></li><li><div class="divider"></div></li><li><a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/cryptojs/crypto-js.min.js"></script><script></script><style>:root{--post-bg-image:url('https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/MySQL.jpeg')}</style><div class="bg-cover pd-header post-cover"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">【MySQL学习】7.InnoDB 引擎底层解析</h1></div></div></div></div></div><main class="post-container content"><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/MySQL/"><span class="chip bg-color">MySQL</span></a> <a href="/tags/InnoDB/"><span class="chip bg-color">InnoDB</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/MySQL%E5%AD%A6%E4%B9%A0/" class="post-category">MySQL学习</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2023-06-15</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 4.7k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i> 阅读时长:&nbsp;&nbsp; 17 分</div></div></div><hr class="clearfix"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/prism/prism.min.css"><div class="card-content article-card-content"><div id="articleContent"><h1 id="1-常见引擎"><a href="#1-常见引擎" class="headerlink" title="1 常见引擎"></a>1 常见引擎</h1><div class="table-container"><table><thead><tr><th>种类</th><th>特点</th></tr></thead><tbody><tr><td>InnoDB</td><td>现<code>Mysql</code>的<code>默认</code><strong>事务型存储引擎</strong>，并且提供了<code>行级锁</code>和<code>外键</code>的约束。性能不错且支持<code>自动崩溃恢复</code></td></tr><tr><td>MyISAM</td><td><code>Mysql 5.1</code> 版本前的<code>默认存储引擎</code>。特性丰富但<code>不支持事务</code>，也<strong>不支持</strong><code>行级锁</code>和<code>外键</code>，也<strong>没有</strong><code>崩溃恢复功能</code></td></tr><tr><td>CSV</td><td>可以将 <code>CSV 文件</code>作为MySQL的<code>表</code>来处理，但这种表<code>不支持索引</code></td></tr><tr><td>Memory</td><td>适合快速访问数据，且数据不会被修改，重启丢失也没有关系；默认使用<code>HASH索引</code></td></tr><tr><td>Archive</td><td><code>归档类型引擎</code>，只能支持<code>insert</code>和<code>select</code>，从<code>MySQL 5.1</code>开始支持索引。</td></tr><tr><td>Federated</td><td>远程的数据库的表。本地表不保存数据，通过<code>远程</code>来返回，类似于<code>SQL Server</code>的<code>链接服务器</code>和<code>Oracle</code>的<code>透明网关</code>。</td></tr><tr><td>Merge</td><td>一组<code>MyISAM</code>的表，结构相同，操作一个对所有的表都生效。</td></tr></tbody></table></div><h2 id="1-1-MyISAM和InnoDB对比"><a href="#1-1-MyISAM和InnoDB对比" class="headerlink" title="1.1 MyISAM和InnoDB对比"></a>1.1 MyISAM和InnoDB对比</h2><div class="table-container"><table><thead><tr><th>对比项</th><th>MyISAM</th><th>InnoDB</th></tr></thead><tbody><tr><td>外键和事务</td><td><code>不支持</code>，适合高速的检索和存储。</td><td><code>支持</code>，适合大量新增和更新，强调安全和数据完整</td></tr><tr><td>锁机制</td><td>支持<code>表级锁</code>，表内所有数据都被锁定。</td><td>支持<code>行级锁</code>，可以锁定具体的一条记录，<code>基于索引加锁</code>。</td></tr><tr><td>索引结构</td><td><code>索引</code>和<code>记录</code>是<code>分开的</code>，所以查询较快。</td><td><code>聚集索引</code>，索引和记录存储<code>在一块</code>，缓存索引也缓存记录</td></tr><tr><td>并发处理能力</td><td><code>表级锁</code>，并发写入性能低下。</td><td><code>行级锁</code>，大量新增性能较好</td></tr><tr><td>存储文件</td><td>一个<code>.frm</code>表结构文件，一个<code>.MYD</code>数据文件，一个<code>.MYI</code>索引文件，<code>256TB</code>最大存储(5.0以上)</td><td>一个<code>.frm</code>表结构文件，一个<code>.idb</code>数据文件，最大支持<code>64TB</code></td></tr><tr><td>应用场景</td><td><code>高速查询</code>、<code>不需要事务</code>、<code>并发低</code>、<code>数据一致性要求低</code></td><td><code>数据安全</code>、<code>行级锁提高并发能力</code>、<code>事务控制</code>、<code>大量新增</code>、<code>提升服务器内存利用率</code>。<code>普遍场景:推荐使用InnoDB</code></td></tr></tbody></table></div><h2 id="1-2-InnoDB内存结构和磁盘结构总览"><a href="#1-2-InnoDB内存结构和磁盘结构总览" class="headerlink" title="1.2 InnoDB内存结构和磁盘结构总览"></a>1.2 InnoDB内存结构和磁盘结构总览</h2><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/innodb-architecture(v5.7).png"><div class="caption"><b class="center-caption">内存结构和磁盘结构总览</b></div><h1 id="2-InnoDB数据存储"><a href="#2-InnoDB数据存储" class="headerlink" title="2 InnoDB数据存储"></a>2 InnoDB数据存储</h1><h2 id="2-1-逻辑结构"><a href="#2-1-逻辑结构" class="headerlink" title="2.1 逻辑结构"></a>2.1 逻辑结构</h2><p>InnoDB存储引擎的<code>逻辑存储结构</code>如下图所示：</p><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Tablespace-segment-extent-page-row.png"><div class="caption"><b class="center-caption">Tablespace-segment-extent-page-row</b></div><h3 id="2-1-1-表空间"><a href="#2-1-1-表空间" class="headerlink" title="2.1.1 表空间"></a>2.1.1 表空间</h3><p>在 InnoDB 存储引擎中，所有的数据都被<code>逻辑地</code>存放在<code>表空间</code>中，<code>表空间</code>（tablespace）是存储引擎中<code>最高</code>的<code>存储逻辑单位</code>，在表空间的下面又包括<code>段</code>（segment）、<code>区</code>（extent）、<code>页</code>（page）。</p><ul><li>同一个数据库实例的所有表空间都有<code>相同的页大小</code>；</li><li>默认情况下，表空间中的<code>页大小</code>都为 <code>16KB</code>，当然也可以通过改变 <code>innodb_page_size</code> 选项对默认大小进行修改，需要注意的是不同的页大小最终也会导致区大小的不同：</li></ul><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Relation-Between-Page-Size-Extent-Size.png"><div class="caption"><b class="center-caption">Relation-Between-Page-Size-Extent-Size</b></div><blockquote><p>从图中可以看出，在 InnoDB 存储引擎中，一个<code>区</code>的大小最小为 <code>1MB</code>，<code>页的数量</code>最少为 <code>64</code> 个。</p><p>InnoDB中，表空间主要分为<code>独立表空间</code>和<code>系统（默认）表空间</code>（还有<code>共享表空间</code>、<code>回滚表空间</code>、<code>临时表空间</code>）。<br>对于<code>系统表空间</code>来说，对应着文件系统中一个或多个实际文件;<br>对于每个<code>独立表空间</code>来说，对应着文件系统中一个名为<code>表名.ibd</code>的实际文件。<br>InnoDB采用将存储的数据按<code>表空间</code>进行存放的设计。在<code>默认配置</code>下会有一个初始大小为<code>10MB</code>，名为<code>ibdata1</code>的文件。该文件就是<code>默认的表空间文件</code>。</p><p>设置<code>innodb_data_file_path</code>参数后，所有基于InnoDB存储引擎的表的数据都会记录到该<code>共享表空间</code>中。若设置了参数<code>innodb_file_per_table</code>，则用户可以将每个基于InnoDB存储引擎的表产生一个<code>独立表空间</code>。独立表空间的命名规则为：<code>表名.ibd</code>。通过这样的方式，用户不用将所有数据都存放于默认的表空间中。</p><p><code>独立表空间文件</code>仅存储该表的<code>数据</code>、<code>索引</code>和<code>插入缓冲BITMAP</code>等信息，<code>其余信息</code>如<code>回滚（undo）信息</code>，<code>插入缓冲索引页</code>、<code>系统事务信息</code>，<code>二次写缓冲</code>（Double write buffer）等还是存放在<code>默认的表空间</code>中。</p></blockquote><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/InnoDB-Tables-Files.png"><div class="caption"><b class="center-caption">InnoDB存储引擎对于文件的存储方式</b></div><blockquote><p>Tips: <code>表的物理存储</code>：MySQL 使用 <code>InnoDB</code> 存储表时，会将<code>表的定义</code>和<code>数据索引等信息</code>分开存储，其中前者存储在 <code>.frm文件</code>中，后者存储在 <code>.ibd 文件</code>中。</p></blockquote><h3 id="2-1-2-段"><a href="#2-1-2-段" class="headerlink" title="2.1.2 段"></a>2.1.2 段</h3><p>2.1节图中显示了<code>表空间</code>是由各个<code>段</code>组成的，常见的段有<code>数据段</code>、<code>索引段</code>、<code>回滚段</code>等。InnoDB存储引擎表是<code>索引组织的</code>（index organized），因此<code>数据即索引，索引即数据</code>。那么<code>数据段</code>即为<code>B+树</code>的<code>叶子节点</code>（图中的<code>Leaf node segment</code>），<code>索引段</code>即为<code>B+树</code>的<code>非索引节点</code>（图中的<code>Non-leaf node segment</code>）。<code>回滚段</code>较为特殊，将会在后面的章节进行单独的介绍。</p><blockquote><p>在InnoDB存储引擎中，对<code>段的管理</code>都是由<code>引擎自身所完成</code>，<code>DBA</code>不能也没有必要对其进行控制。</p><p><code>段</code>其实<strong>不对应</strong>表空间中某一个连续的物理区域，而是一个<code>逻辑上的概念</code>。</p></blockquote><h3 id="2-1-3-区"><a href="#2-1-3-区" class="headerlink" title="2.1.3 区"></a>2.1.3 区</h3><p><code>区</code>是由<code>连续页</code>组成的空间，在任何情况下每个区的大小都为<code>1MB</code>。为了保证区中页的连续性，InnoDB存储引擎一次从磁盘申请<code>4～5个区</code>。在默认情况下，InnoDB存储引擎<code>页的大小</code>为<code>16KB</code>，即一个区中一共有<code>64</code>个连续的<code>页</code>。</p><h3 id="2-1-4-页"><a href="#2-1-4-页" class="headerlink" title="2.1.4 页"></a>2.1.4 页</h3><p>同大多数数据库一样，<code>InnoDB</code>有<code>页</code>（Page）的概念（也可以称为<code>块</code>），<code>页</code>是<code>InnoDB</code>磁盘管理的<code>最小单位</code>。在InnoDB存储引擎中，默认<code>每个页的大小</code>为<code>16KB</code>。而从InnoDB 1.2.x版本开始，可以通过参数<code>innodb_page_size</code>将页的大小设置为<code>4K</code>、<code>8K</code>、<code>16K</code>。若设置完成，则所有表中页的大小都为<code>innodb_page_size</code>，不可以对其再次进行修改。除非通过<code>mysqldump</code>导入和导出操作来产生新的库。</p><p>常见的页类型有：</p><ul><li>数据页（B-tree Node）</li><li>undo页（undo Log Page）</li><li>系统页（System Page）</li><li>事务数据页（Transaction system Page）</li><li>插入缓冲位图页（Insert Buffer Bitmap）</li><li>插入缓冲空闲列表页（Insert Buffer Free List）</li><li>未压缩的二进制大对象页（Uncompressed BLOB Page）</li><li>压缩的二进制大对象页（compressed BLOB Page）</li></ul><blockquote><p>InnoDB 从表中获取某些记录所采取的方式是：将数据划分为若干个页，以<code>页</code>作为<code>磁盘</code>和<code>内存</code>之间交互的<code>基本单位</code>，InnoDB 中页的大小一般为 <code>16 KB</code>。也就是在一般情况下，一次<code>最少</code>从磁盘中<strong>读取</strong> <code>16KB</code> 的内容到内存中，一次<code>最少</code>把内存中的 <code>16KB</code> 内容<strong>刷新</strong>到磁盘中。</p></blockquote><h3 id="2-1-5-行"><a href="#2-1-5-行" class="headerlink" title="2.1.5 行"></a>2.1.5 行</h3><p>与现有的大多数存储引擎一样，InnoDB 使用<code>页</code>作为磁盘管理的<code>最小单位</code>；<code>数据</code>在 InnoDB 存储引擎中都是<code>按行存储</code>的，每个 <code>16KB</code> 大小的页中可以存放 <code>2-200</code> 行的记录。</p><p>当 InnoDB 存储数据时，它可以使用不同的<code>行格式</code>进行存储；</p><p><code>MySQL 5.7</code> 版本支持以下格式的行存储方式：<br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Antelope-Barracuda-Row-Format.png"></p><div class="caption"><b class="center-caption">Antelope-Barracuda-Row-Format</b></div><p></p><ul><li>当前熟知的类型为：<code>Compact</code>、<code>Redundant</code>、<code>Dynamic</code> 和 <code>Compressed</code> 行格式。</li><li><code>Antelope</code> 是 InnoDB 最开始支持的文件格式；<code>Antelope</code> 的名字是在新的文件格式 <code>Barracuda</code> 出现后才起的。</li><li>InnoDB 对于文件格式都会向前兼容。</li><li>Compact 和 Redundant 在磁盘上按照以下方式存储： <img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/COMPACT-And-REDUNDANT-Row-Format.png"><div class="caption"><b class="center-caption">Compact 和 Redundant存储结构</b></div></li></ul><blockquote><p><code>Compact</code>和 <code>Redundant</code>格式<strong>最大的不同</strong>就是<code>记录格式的第一个部分</code>：在<code>Compact</code>中，行记录的第一部分<code>倒序</code>存放了一行数据中<code>列的长度</code>（Length），而<code>Redundant</code>中存的是<code>每一列的偏移量</code>（Offset），从总体上上看，<code>Compact</code>行记录格式相比<code>Redundant</code>格式能够减少<code>20%</code>的存储空间。</p><p>在<code>Compact</code>和<code>Redundant</code>行格式中，对于占用存储空间非常大的列(如极长的<code>VARCHAR</code>或者<code>BLOB</code>这类大对象)，在记录的真实数据处只会存储该列的<code>前768个字节</code>的数据，然后把剩余的数据分散存储在几个其他的页中，记录的真实数据处用<code>20个字节</code>存储指向这些页的地址。这个过程也叫做<code>行溢出</code>，存储<code>超出768字节</code>的那些页面也被称为<code>溢出页</code>。<br>在MySQL 5.1版本中，默认设置为<code>Compact</code>行格式。5.7现在默认是<code>Dynamic</code>。<br>通过<code>SHOW TABLE STATUS LIKE &#39;table_name&#39;;</code> 查看当前表锁使用的行格式。</p><h1 id="3-InnoDB数据页结构"><a href="#3-InnoDB数据页结构" class="headerlink" title="3 InnoDB数据页结构"></a>3 InnoDB数据页结构</h1><p>一个 InnoDB <code>页</code>有以下七个部分：</p></blockquote><ul><li><code>File Header</code>：文件头部，38 字节，页的一些通用信息</li><li><code>Page Header</code>：页面头部，56 字节，数据页专有的一些信息</li><li><code>Infimum + Supremum</code>：最小记录和最大记录，26 字节，两个虚拟的行记录</li><li><code>User Records</code>：用户记录，大小不确定，实际存储的行记录内容</li><li><code>Free Space</code>：空闲空间，大小不确定，页中尚未使用的空间</li><li><code>Page Directory</code>：页面目录，大小不确定，页中的某些记录的相对位置</li><li><code>File Trailer</code>：文件尾部，8 字节，校验页是否完整<img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/InnoDB-B-Tree-Node.png"><div class="caption"><b class="center-caption">InnoDB-B-Tree-Node</b></div></li><li>每一个页中包含了两对 header/trailer：内部的 <code>Page Header/Page Directory</code> 关心的是<code>页的状态信息</code>，而 <code>File Header/File Trailer</code> 关心的是<code>记录页的头信息</code>。</li><li>在页的头部和尾部之间就是<code>用户记录</code>和<code>空闲空间</code>了，每一个数据页中都包含 <code>Infimum</code> 和 <code>Supremum</code> 这两个虚拟的记录（可以理解为<code>占位符</code>），<code>Infimum</code> 记录是比该页中任何主键值都要小的值，<code>Supremum</code> 是该页中的最大值。</li><li><code>User Records</code> 就是整个页面中真正用于存放行记录的部分，而 <code>Free Space</code> 就是空余空间了，它是一个<code>链表</code>的数据结构，为了保证插入和删除的效率，整个页面并<strong>不会</strong>按照<code>主键顺序</code>对所有记录进行排序，它会自动从左侧向右寻找<code>空白节点</code>进行插入，行记录在<code>物理存储</code>上并不是按照顺序的，它们之间的顺序是由 <code>next_record</code> 这一指针控制的。</li></ul><h1 id="4-Buffer-Pool"><a href="#4-Buffer-Pool" class="headerlink" title="4 Buffer Pool"></a>4 Buffer Pool</h1><h2 id="4-1-作用"><a href="#4-1-作用" class="headerlink" title="4.1 作用"></a>4.1 作用</h2><p>存放<code>缓存</code>和<code>配置</code>，<code>加速读和写</code>。</p><ul><li><p><code>加速读</code>：当需要访问一个<code>数据页(page)</code>的时候，如果这个<code>page</code>已经在<code>Buffer Pool</code>中，那么就不再需要访问磁盘，直接从<code>Buffer Pool</code>中获取。</p><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Read-accelerate.png"><div class="caption"><b class="center-caption">加速读原理</b></div></li><li><p><code>加速写</code>：当需要修改一个<code>page</code>的时候，先将这个<code>page</code>在缓冲池中进行修改，记下相关的<code>redo log</code>，这个页面的修改就算已经完成了。至于这个被修改的<code>dirty page</code>（脏页）什么时候真正刷新到磁盘，后面会详细讲到。</p><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Write-accelerate.png"><div class="caption"><b class="center-caption">加速写原理</b></div></li></ul><h2 id="4-2-总体架构"><a href="#4-2-总体架构" class="headerlink" title="4.2 总体架构"></a>4.2 总体架构</h2><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Buffer-Pool-Architecture.png"><div class="caption"><b class="center-caption">Buffer Pool整体架构图</b></div><h2 id="4-3-Buffer-Pool-内部组成"><a href="#4-3-Buffer-Pool-内部组成" class="headerlink" title="4.3 Buffer Pool 内部组成"></a>4.3 Buffer Pool 内部组成</h2><p>Buffer Pool 中<code>默认的缓存页大小</code>和在<code>磁盘上</code>默认的<code>页大小</code>是一样的，都是 <code>16KB</code>。为了更好的管理这些在 Buffer Pool 中的缓存页，InnoDB 为<strong>每一个缓存页</strong>都创建了一些所谓的<code>控制信息</code>，这些控制信息包括<code>该页所属的表空间编号</code>、<code>页号</code>、 缓存页在 Buffer Pool 中的<code>地址</code>、<code>链表节点信息</code>、一些<code>锁信息</code>以及 <code>LSN 信息</code>，以及一些<code>别的控制信息</code>。</p><p>每个缓存页对应的<code>控制信息</code>占用的内存大小是相同的，我们称为<code>控制块</code>。</p><p><code>控制块</code>和<code>缓存页</code>是<code>一一对应</code>的，它们都被存放到 Buffer Pool 中，其中控制块被存放到 Buffer Pool 的<code>前边</code>，缓存页被存放到 Buffer Pool <code>后边</code>，所以整个 Buffer Pool 对应的内存空间看起来就是这样的：<br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Buffer-Pool-in-Memory-Structure.png"></p><div class="caption"><b class="center-caption">Buffer Pool内存结构图</b></div><p></p><h2 id="4-4-管理机制"><a href="#4-4-管理机制" class="headerlink" title="4.4 管理机制"></a>4.4 管理机制</h2><ul><li><code>free page</code>：空闲page，未被使用</li><li><code>clean page</code>：被使用page，但没有被修改</li><li><code>dirty page</code>：脏页，被使用、被修改、与磁盘不一致</li></ul><p>用<code>三种链表结构</code>来管理这<code>三个page</code>：</p><ul><li><code>freelist</code>：管理<code>free page</code>。<img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/FreeList-in-Pool.png"><div class="caption"><b class="center-caption">freelist的效果图</b></div></li><li><code>flushlist</code>：管理<code>dirty page</code>，按<code>修改时间</code>排序，最早在后，先更新磁盘，寄存在<code>lrulist</code>中，但互不影响。效果图类似freelist。</li><li><code>lrulist</code>：管理正在使用的 <code>clean page</code> 和 <code>dirty page</code>，以<code>midpoint</code>为中点，左面为<code>new列表</code>，存放经常访问的数据，占<code>63%</code>；右面为<code>old</code>，存放不用的，要被清掉的，占<code>37%</code>。</li></ul><h2 id="4-5-采用改进型LRU算法维护"><a href="#4-5-采用改进型LRU算法维护" class="headerlink" title="4.5 采用改进型LRU算法维护"></a>4.5 采用改进型LRU算法维护</h2><ul><li>普通LRU：末尾淘汰法，新数据进入头，释放空间从末尾释放。</li><li>改进LRU：链表分为<code>new</code>和<code>old</code>，添加不是从头插入，而是从<code>中点</code>插入，数据被访问了，那么就从中点开始左移，如果没怎么被访问，那么就会被挤压到中点右面，等待被释放。<pre><code>  &gt; 每当有新的page数据放入缓存池，InnoDB先判断有没有足够的`free page`，如果有就删除`free list`中的数据，然后放到LRU，如果没有了，那么LRU末尾就会开始释放，够了再插进来。
</code></pre></li></ul><p>InnoDB采用<code>改进的LRU算法</code>(后面刷<code>LeetCode LRU</code>时可以看看算法流程和代码)，将链表分为两个区域，一部分<code>使用频率高的</code>在链表的<code>头部</code>称为<code>young区</code>，一部分<code>使用频率低的</code>在链表的<code>尾部</code>称为<code>old区</code>。主要示意图如下：</p><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/innodb-buffer-pool-list.png"><div class="caption"><b class="center-caption">Buffer Pool List</b></div><h2 id="4-6-配置参数"><a href="#4-6-配置参数" class="headerlink" title="4.6 配置参数"></a>4.6 配置参数</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%innodb_page_size%'</span><span class="token punctuation">;</span> <span class="token comment">-- page大小</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%innodb_old%'</span><span class="token punctuation">;</span>  <span class="token comment">-- lru old的参数</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%innodb_buffer%'</span><span class="token punctuation">;</span> <span class="token comment">-- 查看所有参数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>缓存池的存储模块嵌套关系: <code>buffer-&gt;instance-&gt;chunk -&gt;page</code>。<br>buffer推荐占物理内存的<code>60%-80%</code>，instance按需增加数量， page微量调整。</p></blockquote><h2 id="4-7-多个-Buffer-Pool-实例"><a href="#4-7-多个-Buffer-Pool-实例" class="headerlink" title="4.7 多个 Buffer Pool 实例"></a>4.7 多个 Buffer Pool 实例</h2><p><code>Buffer Pool 本质</code>是 InnoDB 向操作系统申请的一块<strong>连续的内存空间</strong>，在多线程环境下，访问 Buffer Pool 中的各种链表都需要<code>加锁</code>处理，在 Buffer Pool 特别大而且多线程并发访问特别高的情况下，单一的 Buffer Pool 可能会影响<code>请求的处理速度</code>。所以在 Buffer Pool 特别大的时候，我们可以把它们<strong>拆分</strong>成若干个小的 Buffer Pool，每个 Buffer Pool 都称为一个<code>实例</code>，它们都是<code>独立的</code>， 独立的去申请内存空间，独立的管理各种链表，所以在多线程并发访问时并不会相互影响，从而提高并发处理能力。</p><p>通过设置 <code>innodb_buffer_pool_instances</code> 的值来修改 Buffer Pool <code>实例</code>的个数，那每个 Buffer Pool 实例实际占多少内存空间呢?</p><p>公式：<br><pre class="line-numbers language-none"><code class="language-none">innodb_buffer_pool_size&#x2F;innodb_buffer_pool_instances<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><br>也就是<code>总共的大小</code>除以<code>实例个数</code>，结果就是每个 Buffer Pool 实例占用的大小。</p><p>不过也不是说 Buffer Pool 实例创建的越多越好，分别管理各个 Buffer Pool 也是需要<code>性能开销</code>的，InnoDB 规定：</p><blockquote><p>当 <code>innodb_buffer_pool_size</code>(默认 128M) 的值<code>小于1G</code> 的时候设置多个实例是<code>无效的</code>，InnoDB 会默认把 <code>innodb_buffer_pool_instances</code>的值修改为 <code>1</code>。所以 Buffer Pool 大于或等于 <code>1G</code> 的时候应该设置多个 Buffer Pool 实例。</p></blockquote><h2 id="4-8-innodb-buffer-pool-chunk-size"><a href="#4-8-innodb-buffer-pool-chunk-size" class="headerlink" title="4.8 innodb_buffer_pool_chunk_size"></a>4.8 innodb_buffer_pool_chunk_size</h2><p>在 <code>MySQL 5.7.5</code> 之前，Buffer Pool的大小只能在服务器<code>启动</code>时通过配置<code>innodb_buffer_pool_size</code>启动参数来调整大小，在服务器<code>运行过程中</code>是<strong>不允许调整</strong>该值的。不过在<code>MySQL 5.7.5以及之后的版本</code>中支持了在服务器运行过程中调整 Buffer Pool 大小的功能。</p><p>但是有一个问题，就是每次当我们要重新调整 Buffer Pool 大小时，都需要重新向操作系统申请一块<code>连续的</code>内存空间，然后将旧的 Buffer Pool 中的内容复制到这一块新空间，这是<code>极其耗时</code>的。所以 MySQL 决定不再一次性为某个 Buffer Pool 实例向操作系统申请一大片连续的内存空间，而是以一个所谓的 <code>chunk</code> 为单位向操作系统申请空间。</p><p>也就是说，一个Buffer Pool实例其实是由若干个<code>chunk</code>组成的， 一个 <code>chunk</code> 就代表一片<code>连续的</code>内存空间，里边包含了若干<code>缓存页</code>及其对应的<code>控制块</code>：<br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/Chunk-in-Pool.png"></p><div class="caption"><b class="center-caption">Chunk-in-Pool</b></div><p></p><h2 id="4-9-Change-Bufferi"><a href="#4-9-Change-Bufferi" class="headerlink" title="4.9 Change Bufferi"></a>4.9 Change Bufferi</h2><p>负责存储新增和更新的缓存，避免频繁的磁盘操作，先对比缓存池中已有数据，然后更新的数据放这，闲置时再更新入磁盘。</p><p>占用Buffer Pool空间<code>默认25%</code>，<code>最大</code>允许<code>50%</code>，根据写入量进行调整。<br><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%innodb_change_buffer_max_size%'</span><span class="token punctuation">;</span> <span class="token comment">-- 查看当前cb占比</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> innodb_change_buffer_max_size <span class="token operator">=</span> <span class="token identifier"><span class="token punctuation">`</span>占比数<span class="token punctuation">`</span></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/innodb-change-buffer.png"></p><div class="caption"><b class="center-caption">Change Buffer</b></div><p></p><h2 id="4-10-Log-Buffer"><a href="#4-10-Log-Buffer" class="headerlink" title="4.10 Log Buffer"></a>4.10 Log Buffer</h2><ul><li>负责存储操作记录</li><li>存储一定数量更新到磁盘</li><li>也可定期更新到磁盘</li><li>容量大小通过参数<code>innodb_log_buffer_size</code>控制</li><li>刷盘策略：通过参数<code>innodb_flush_log_at_trx_commit</code>控制。其中：<ul><li>0：<code>每隔1秒</code>进行写日志和刷盘操作，流程: <code>log buffer-&gt; OScache -&gt;DISK</code>；该模式下在事务提交时<code>不会主动触发</code>写入磁盘的操作。</li><li>1：事务提交就刷盘；</li><li>2：事物提交，就写日志（意味着写入到了<code>操作系统的文件缓存</code>），每隔一秒刷盘。</li></ul></li></ul><p>借用<a target="_blank" rel="noopener" href="https://www.xiaolincoding.com/mysql/log/how_update.html#redo-log-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%88%B7%E7%9B%98">小林子</a> 的图可以更好地加深理解：<br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/innodb_flush_log_at_trx_commit.drawio.png"></p><div class="caption"><b class="center-caption">刷盘机制</b></div><p></p><blockquote><p><code>innodb_flush_log_at_trx_commit</code> 为 <code>0</code> 和 <code>2</code> 的时候，什么时候才将 redo log 写入磁盘？</p></blockquote><p>InnoDB 的后台线程<code>每隔 1 秒</code>：</p><ul><li>针对参数 <code>0</code>：会把缓存在 <code>redo log buffer</code> 中的 <code>redo log</code> ，通过调用 <code>write()</code> 写到<code>操作系统的 Page Cache</code>，然后调用 <code>fsync()</code> <strong>持久化</strong>到<code>磁盘</code>。所以参数为 <code>0</code> 的策略，MySQL 进程的<code>崩溃</code>会导致上一秒钟所有事务数据的<code>丢失</code>;</li><li>针对参数 <code>2</code>：调用 <code>fsync</code>，将缓存在操作系统中 <code>Page Cache</code> 里的 <code>redo log</code> 持久化到<code>磁盘</code>。所以参数为 2 的策略，较取值为 0 情况下<code>更安全</code>，因为 MySQL 进程的崩溃并不会丢失数据，只有在<code>操作系统崩溃</code>或者<code>系统断电</code>的情况下，上一秒钟所有事务数据才可能丢失。</li></ul><p>加入了后台线程后，<code>innodb_flush_log_at_trx_commit</code> 的刷盘时机如下图：<br><img src="https://gcore.jsdelivr.net/gh/zyxelva/picgo/markdown/innodb_flush_log_at_trx_commit2.drawio.png"></p><div class="caption"><b class="center-caption">加入后台线程后的刷盘机制</b></div><p></p><h2 id="4-11-自适应Hash索引"><a href="#4-11-自适应Hash索引" class="headerlink" title="4.11 自适应Hash索引"></a>4.11 自适应Hash索引</h2><p>属于Buffer Pool中的一片内存。</p><p>当InnoDB观察到某个索引的值频繁被使用，那么会创建<code>自适应hash索引</code>，可以提高查询速度，可以通过参数<code>innodb_adaptive_hash_index</code>来<code>禁用</code>或<code>启动</code>此特性，<code>默认为开启</code>。</p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ul><li><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-storage-engine.html">The InnoDB Storage Engine</a></li><li>姜承尧. 《MySQL技术内幕：InnoDB存储引擎》第2版。</li><li><a target="_blank" rel="noopener" href="https://draveness.me/mysql-innodb/">『浅入浅出』MySQL 和 InnoDB</a></li></ul></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Kezade</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://zyxelva.github.io/posts/4004849283.html">https://zyxelva.github.io/posts/4004849283.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Kezade</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})})</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/MySQL/"><span class="chip bg-color">MySQL</span></a> <a href="/tags/InnoDB/"><span class="chip bg-color">InnoDB</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/share/js/social-share.min.js"></script></div></div></div><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.twikoo-card{margin:1.5rem auto}.twikoo-card .card-content{padding:20px}#tcomments textarea{box-sizing:border-box;background:url("/") 100% 100% no-repeat}#tcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem;text-align:left}#tcomments blockquote p{text-indent:.2rem}#tcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#tcomments img{max-width:100%;height:auto;cursor:pointer}#tcomments ol li{list-style-type:decimal}#tcomments ol,ul{display:block;padding-left:2em;word-spacing:0.05rem}#tcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#tcomments ul li{list-style-type:disc}#tcomments ul ul li{list-style-type:circle}#tcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#tcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#tcomments table th{background-color:#f2f2f2;min-width:80px}#tcomments table td{min-width:80px}#tcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#tcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#tcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#tcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#tcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#tcomments h6{font-size:1rem;line-height:1.3rem}#tcomments p{font-size:1rem;line-height:1.5rem}#tcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#tcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#tcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#tcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#tcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#tcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#tcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#tcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#tcomments b,strong{font-weight:700}#tcomments dfn{font-style:italic}#tcomments small{font-size:85%}#tcomments cite{font-style:normal}#tcomments mark{background-color:#fcf8e3;padding:.2em}#tcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#tcomments table th{background-color:#f2f2f2;min-width:80px}#tcomments table td{min-width:80px}#tcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card twikoo-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div class="card-content" style="display:grid"><div id="tcomments"></div></div></div><script src="https://gcore.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js"></script><script>twikoo.init({envId:"https://kezadetwikoo.netlify.app/.netlify/functions/twikoo",el:"#tcomments",region:"",path:""}).then(function(){for(var t=document.querySelector("#twikoo").getElementsByTagName("input"),e=0;e<t.length;e++)t[e]&&t[e].classList.add("browser-default")})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/posts/3590034994.html"><div class="card-image"><img src="/medias/MySQL.jpeg" class="responsive-img" alt="【MySQL学习】8.事务原理与MVCC"> <span class="card-title">【MySQL学习】8.事务原理与MVCC</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2023-06-19</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/MySQL%E5%AD%A6%E4%B9%A0/" class="post-category">MySQL学习</a></span></div></div><div class="card-action article-tags"><a href="/tags/MySQL/"><span class="chip bg-color">MySQL</span></a> <a href="/tags/MVCC/"><span class="chip bg-color">MVCC</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/1755358152.html"><div class="card-image"><img src="/medias/Netty.png" class="responsive-img" alt="【Netty学习】10.WebSocket通信实现"> <span class="card-title">【Netty学习】10.WebSocket通信实现</span></div></a><div class="card-content article-content"><div class="summary block-with-text">举例基于WebSocket实现聊天应用</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2023-06-15</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Netty%E5%AD%A6%E4%B9%A0/" class="post-category">Netty学习</a></span></div></div><div class="card-action article-tags"><a href="/tags/Netty/"><span class="chip bg-color">Netty</span></a> <a href="/tags/IM%E8%81%8A%E5%A4%A9/"><span class="chip bg-color">IM聊天</span></a> <a href="/tags/WebSocket/"><span class="chip bg-color">WebSocket</span></a> <a href="/tags/Stomp/"><span class="chip bg-color">Stomp</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"!==n.getRangeAt(0).commonAncestorContainer.nodeName&&"CODE"!==n.getRangeAt(0).commonAncestorContainer.nodeName||(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: Kezade<br />文章作者: Kezade<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/codeBlock/codeBlockFuction.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/prism/prism.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/codeBlock/codeLang.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/codeBlock/codeCopy.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/tocbot/tocbot.min.js"></script><script>$(function(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-(.4*$(window).height()-45),collapseDepth:Number("0"),headingSelector:"h1, h2, h3, h4, h5"});let t=parseInt(.4*$(window).height()-64),e=$(".toc-widget");$(window).scroll(function(){$(window).scrollTop()>t?e.addClass("toc-fixed"):e.removeClass("toc-fixed")});const o="expanded";let n=$("#toc-aside"),i=$("#main-content");$("#floating-toc-btn .btn-floating").click(function(){n.hasClass(o)?(n.removeClass(o).hide(),i.removeClass("l9")):(n.addClass(o).show(),i.addClass("l9")),function(t,e){let o=$("#"+t);if(0===o.length)return;let n=o.width();n+=n>=450?21:n>=350&&n<450?18:n>=300&&n<350?16:14,$("#"+e).width(n)}("artDetail","prenext-posts")})})</script></main><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})</script><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2019-2025</span> <a href="/about" target="_blank">Kezade</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=6e4,t=36e5,n=864e5,a=365*n,i=new Date,r="2019",o=i.getFullYear(),s=i.getMonth()+1,l=i.getDate(),m=i.getHours(),c=i.getMinutes(),d=i.getSeconds(),g=Date.UTC(r,"6","28","0","0","0"),h=Date.UTC(o,s,l,m,c,d)-g,u=Math.floor(h/a),M=Math.floor(h/n-365*u),T=Math.floor((h-(365*u+M)*n)/t),f=Math.floor((h-(365*u+M)*n-T*t)/e),y=Math.floor((h-(365*u+M)*n-T*t-f*e)/1e3);if(r===String(o)){document.getElementById("year").innerHTML=o;var v="This site has been running for "+M+" days";v="本站已运行 "+M+" 天",document.getElementById("sitetime").innerHTML=v}else{document.getElementById("year").innerHTML=r+" - "+o;var H="This site has been running for "+u+" years and "+M+" days "+T+" hours "+f+" mins "+y+" seconds";H="本站已苟且偷生 "+u+" 年 "+M+" 天 "+T+" 小时 "+f+" 分钟 "+y+" 秒",document.getElementById("sitetime").innerHTML=H}};calcSiteTime(),setInterval(calcSiteTime,1e3)</script><br></div><div class="col s12 m4 l4 social-link"><a href="https://github.com/zyxelva" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:zyxelva@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1807401971" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1807401971" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a> <a href="https://www.zhihu.com/people/kezade" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/kezade" data-position="top" data-delay="50"><i class="fab fa-zhihu1">知</i></a><a href="../rss2.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script>$(function(){!function(t,e,r){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var n=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),a=document.getElementById(e),s=document.getElementById(r);a.addEventListener("input",function(){var t='<ul class="search-result-list">',e=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length<=0||(n.forEach(function(r){var n=!0,a=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=r.url;i=0===i.indexOf("/")?r.url:"/"+i;var l=-1,c=-1,u=-1;if(""!==a&&""!==s&&e.forEach(function(t,e){l=a.indexOf(t),c=s.indexOf(t),l<0&&c<0?n=!1:(c<0&&(c=0),0===e&&(u=c))}),n){t+="<li><a href='"+i+"' class='search-result-title'>"+a+"</a>";var o=r.content.trim().replace(/<[^>]+>/g,"");if(u>=0){var h=u-20,f=u+80;h<0&&(h=0),0===h&&(f=100),f>o.length&&(f=o.length);var m=o.substr(h,f);e.forEach(function(t){var e=new RegExp(t,"gi");m=m.replace(e,'<em class="search-keyword">'+t+"</em>")}),t+='<p class="search-result">'+m+"...</p>"}t+="</li>"}}),t+="</ul>",s.innerHTML=t)})}})}("/search.xml","searchInput","searchResult")})</script><div class="stars-con"><div id="stars"></div><div id="stars2"></div><div id="stars3"></div></div><script>function switchNightMode(){$('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($("body")),setTimeout(function(){$("body").hasClass("DarkMode")?($("body").removeClass("DarkMode"),localStorage.setItem("isDark","0"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")):($("body").addClass("DarkMode"),localStorage.setItem("isDark","1"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")),setTimeout(function(){$(".Cuteen_DarkSky").fadeOut(1e3,function(){$(this).remove()})},2e3)})}</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/materialize/materialize.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/masonry/masonry.pkgd.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/aos/aos.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/js/matery.js"></script><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/mermaid/mermaid.min.css"><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/mermaid/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/background/ribbon-dynamic.js" async></script><script src="https://gcore.jsdelivr.net/gh/zyxelva/zyxelva.github.io@main/libs/instantpage/instantpage.js" type="module"></script></body></html>